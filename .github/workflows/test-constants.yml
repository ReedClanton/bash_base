name: Unit Tests of output() util constants
run-name: ${{ github.actor }} has triggered the running of unit tests of output()'s constants file because they initiated a ${{ github.event_name }}
on: push
jobs:
  unit-test-output-util-constants:
    runs-on: ubuntu-20.04
    steps:
      - name: Job ${{ github.job }}, initiated by ${{ github.actor }} via a ${{ github.event_name }}, is checking out branch ${{ github.ref }} from ${{ github.repository_owner }}'s ${{ github.repository }} repo on ${{ runner.os }}...
        uses: actions/checkout@v3
      - name: Job ${{ github.job }}, initiated by ${{ github.actor }} via a ${{ github.event_name }}, installing the 'BusyBox' shell
        run:  sudo apt-get install busybox
      - name: Install Kcov
        run:  sudo apt-get install binutils-dev libssl-dev libcurl4-openssl-dev zlib1g-dev libdw-dev libiberty-dev
      - name: Install shellspec
        run:  curl -fsSL https://git.io/shellspec | sh -s -- --yes
      - name: Run unit tests on bash shell with code coverage
        run:  shellspec -s /bin/bash --fail-fast --fail-no-examples --warning-as-failure ./spec/unit/output/util/constants_*
#        run: shellspec -s /bin/bash --fail-fast --fail-no-examples --warning-as-failure --kcov --kcov-options "--include-pattern=src/shell/functions/output/util/constants.sh" --fail-low-coverage ./spec/unit/output/util/constants_*
      - name: Run unit tests on sh shell
        run:  shellspec -s /bin/sh --fail-fast --fail-no-examples --warning-as-failure ./spec/unit/output/util/constants_*
      - name: Run unit tests on dash shell
        run:  shellspec -s /bin/dash --fail-fast --fail-no-examples --warning-as-failure ./spec/unit/output/util/constants_*
#      - name: Run unit tests on BusyBox shell
#        run:  shellspec -s /usr/bin/busybox --fail-fast --fail-no-examples --warning-as-failure ./spec/unit/output/util/constants_*
#      - name: Run unit tests on zsh shell
#        run:  shellspec -s /path/to/zsh --fail-fast --fail-no-examples --warning-as-failure ./spec/unit/output/util/constants_*

