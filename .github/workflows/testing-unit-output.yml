name: Unit Test output()
run-name: ${{ github.actor }} has triggered the running of unit tests of output() for the ${{ github.run_attempt }} time by initiating a ${{ github.event_name }}
on: [push, workflow_dispatch]
jobs:
  unit-test-ubuntu-bash-output:
    runs-on: ubuntu-20.04
    steps:
      - name: Checking out ${{ github.ref_type }} ${{ github.ref_name }} from ${{ github.repository_owner }}'s ${{ github.repository }} repo on ${{ runner.os }} because ${{ github.actor }} initiated a ${{ github.event_name }}...
        uses: actions/checkout@v3
      - name: Install 'Kcov' (test coverage tool) and 'shellspec' (POSIX shell script testing tool)...
        uses: ./.github/actions/install-kcov-and-shellspec
      - name: Running unit tests from a 'bash' shell (with code coverage) from ${{ github.workspace }}...
        run:  shellspec --no-fail-fast -p -s /bin/bash --kcov --kcov-options "--include-pattern=src/shell/functions/output/output.sh --limits=87,100" ./spec/unit/output/output_*
##        run:  shellspec --no-fail-fast -p -s /bin/bash --kcov --kcov-options "--include-pattern=src/shell/functions/output/output.sh --limits=83,100" --fail-low-coverage ./spec/unit/output/output_*
  unit-test-ubuntu-dash-output:
    runs-on: ubuntu-20.04
    steps:
      - name: Checking out ${{ github.ref_type }} ${{ github.ref_name }} from ${{ github.repository_owner }}'s ${{ github.repository }} repo on ${{ runner.os }} because ${{ github.actor }} initiated a ${{ github.event_name }}...
        uses: actions/checkout@v3
      - name: Installing 'shellspec' (POSIX shell script testing tool)...
        uses: ./.github/actions/install-shellspec
      - name: Running unit tests from a 'dash' shell...
        run:  shellspec --no-fail-fast -s /bin/dash ./spec/unit/output/output_*
  unit-test-ubuntu-zsh-output:
    runs-on: ubuntu-20.04
    steps:
      - name: Checking out ${{ github.ref_type }} ${{ github.ref_name }} from ${{ github.repository_owner }}'s ${{ github.repository }} repo on ${{ runner.os }} because ${{ github.actor }} initiated a ${{ github.event_name }}...
        uses: actions/checkout@v3
      - name: Installing 'shellspec' (POSIX shell script testing tool)...
        uses: ./.github/actions/install-shellspec
      - name: Installing 'zsh' (shell)...
        uses: ./.github/actions/install-zsh-shell-via-apt
      - name: Running unit tests from a 'zsh' shell...
        run:  shellspec --no-fail-fast -s /bin/zsh ./spec/unit/output/output_*
  unit-test-ubuntu-ksh-output:
    runs-on: ubuntu-20.04
    steps:
      - name: Checking out ${{ github.ref_type }} ${{ github.ref_name }} from ${{ github.repository_owner }}'s ${{ github.repository }} repo on ${{ runner.os }} because ${{ github.actor }} initiated a ${{ github.event_name }}...
        uses: actions/checkout@v3
      - name: Installing 'shellspec' (POSIX shell script testing tool)...
        uses: ./.github/actions/install-shellspec
      - name: Installing 'ksh' (shell)...
        uses: ./.github/actions/install-ksh-shell-via-apt-get
      - name: Running unit tests from a 'ksh' shell...
        run:  shellspec --no-fail-fast -s /bin/ksh ./spec/unit/output/output_*
  unit-test-macos-bash-output:
    runs-on: macos-12
    steps:
      - name: Checking out ${{ github.ref_type }} ${{ github.ref_name }} from ${{ github.repository_owner }}'s ${{ github.repository }} repo on ${{ runner.os }} because ${{ github.actor }} initiated a ${{ github.event_name }}...
        uses: actions/checkout@v3
      - name: Installing 'shellspec' (POSIX shell script testing tool)...
        uses: ./.github/actions/install-shellspec
      - name: Running unit tests from a 'bash' shell (with code coverage) from ${{ github.workspace }}...
        run:  $HOME/.local/bin/shellspec --no-fail-fast -s /bin/bash ./spec/unit/output/output_*
  unit-test-macos-dash-output:
    runs-on: macos-12
    steps:
      - name: Checking out ${{ github.ref_type }} ${{ github.ref_name }} from ${{ github.repository_owner }}'s ${{ github.repository }} repo on ${{ runner.os }} because ${{ github.actor }} initiated a ${{ github.event_name }}...
        uses: actions/checkout@v3
      - name: Installing 'shellspec' (POSIX shell script testing tool)...
        uses: ./.github/actions/install-shellspec
      - name: Running unit tests from a 'dash' shell...
        run:  $HOME/.local/bin/shellspec --no-fail-fast -s /bin/dash ./spec/unit/output/output_*
  unit-test-macos-zsh-output:
    runs-on: macos-12
    steps:
      - name: Checking out ${{ github.ref_type }} ${{ github.ref_name }} from ${{ github.repository_owner }}'s ${{ github.repository }} repo on ${{ runner.os }} because ${{ github.actor }} initiated a ${{ github.event_name }}...
        uses: actions/checkout@v3
      - name: Installing 'shellspec' (POSIX shell script testing tool)...
        uses: ./.github/actions/install-shellspec
      - name: Running unit tests from a 'zsh' shell...
        run:  $HOME/.local/bin/shellspec --no-fail-fast -s /bin/zsh ./spec/unit/output/output_*

