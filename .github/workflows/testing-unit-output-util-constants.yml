name: Unit Test output()'s constants
run-name: ${{ github.actor }} has triggered the running of unit tests of output()'s constants file for the ${{ github.run_attempt }} time by initiating a ${{ github.event_name }}
on: push
jobs:
  unit-test-output-util-constants:
    runs-on: ubuntu-20.04
    steps:
      - name: Checking out ${{ github.ref_type }} ${{ github.ref_name }} from ${{ github.repository_owner }}'s ${{ github.repository }} repo on ${{ runner.os }} because ${{ github.actor }} initiated a ${{ github.event_name }}...
        uses: actions/checkout@v3
      - name: Installing 'Kcov' (test coverage library)...
        run:  sudo apt-get install binutils-dev libssl-dev libcurl4-openssl-dev zlib1g-dev libdw-dev libiberty-dev kcov
      - name: Installing 'shellspec' (POSIX shell script testing tool)...
        run:  curl -fsSL https://git.io/shellspec | sh -s -- --yes
      - name: Running unit tests from a 'bash' shell (with code coverage) from ${{ github.workspace }}...
#        run:  shellspec --no-fail-fast -s /bin/bash ./spec/unit/output/util/constants_*
        run:  shellspec -p -s /bin/bash --kcov --fail-low-coverage --kcov-options "--include-pattern=src/shell/functions/output/util/constants.sh --limits=99,101" ./spec/unit/output/util/constants_*
      - name: Running unit tests from a 'dash' shell...
        run:  shellspec --no-fail-fast -s /bin/dash ./spec/unit/output/util/constants_*
      - name: Installing 'ksh' (shell)...
        run:  sudo apt-get install ksh
      - name: Running unit tests from a 'ksh' shell...
        run:  shellspec --no-fail-fast -s /usr/bin/ksh ./spec/unit/output/util/constants_*
      - name: Installing 'zsh' (shell)...
        run:  sudo apt install -y zsh
      - name: Running unit tests from a 'zsh' shell...
        run:  shellspec --no-fail-fast -s /usr/bin/zsh ./spec/unit/output/util/constants_*
##      - name: Installing 'BusyBox' (shell)...
##        run:  sudo apt-get install busybox
##      - name: Running unit tests from a 'busybox' shell...
##        run:  busybox -c "shellspec --no-fail-fast -s /usr/bin/busybox ./spec/unit/output/util/constants_*

